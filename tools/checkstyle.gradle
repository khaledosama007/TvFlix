apply plugin: 'checkstyle'
apply plugin: "io.gitlab.arturbosch.detekt"               // detekt STEP1 applying plugin (detekt = kotlin code's static analyser)

task checkstyle(type: Checkstyle) {
    description 'Check code standard'
    group 'verification'
    configFile file("${project.rootDir}/tools/rules-checkstyle.xml")
    source fileTree('src/main/java')
    include '**/*.java'
    exclude '**/gen/**'

    classpath = files()
    showViolations true

    reports {
        xml.enabled = true
        html.enabled = true
        html.destination file("$project.buildDir/outputs/checkstyle/checkstyle.html")
    }
}


detekt {
    parallel = true
    allRules = false
    ignoreFailures = true
    debug = false
    buildUponDefaultConfig = true
}


// detekt STEP3 gradle task configuration
tasks.named("detekt").configure {
    reports {
        html.required.set(true)
        sarif.required.set(false)
        xml.required.set(false)
        txt.required.set(false)
    }
}